<!DOCTYPE html>
<html>
  <head>
    <title>The Adventures of Marco Polo</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/style.css" />

    <!--[if lte IE 8]>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" />
    <![endif]-->
    <script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    <script type="text/javascript" src="js/smoothscroll.js"></script>
        <script>
    // script for Leaflet map
      var map;
      var venicePosition = [-40, 49];
      var acrePosition = [-55, 82];
      var jerusalemPosition = [-62, 83];
      var ormusPosition = [-70, 115];
      var balkhPosition = [-51, 118];
      var kashgarPosition = [-49, 147];
      var mogaoPosition = [-41, 162];
      var shangduPosition = [-38, 194];
      var markers = [];


      function setIcon_size(zoom){
        var percentage = zoom / 5;
        
        for(i=0;i<markers.length;i++){
  
          var ico_size = markers[i].options.icon.options.iconSize_original;            
              markers[i].options.icon.options.iconSize = [ico_size[0]*percentage,ico_size[1]*percentage];
          markers[i].setIcon(markers[i].options.icon);
        }
      }
      function init() {
        var mapMinZoom = 3;
        var mapMaxZoom = 5;
        map = L.map('map', {
          maxZoom: mapMaxZoom,
          minZoom: mapMinZoom,
          zoomControl: false,
          markerZoomAnimation: false,
          crs: L.CRS.Simple
        }).setView([0, 0], mapMaxZoom);

        

        map.on('zoomend',function(event){
          var zoomlevel = map.getZoom();

          setIcon_size(zoomlevel);
          
        });
        var mapBounds = new L.LatLngBounds(
            map.unproject([0, 5792], mapMaxZoom),
            map.unproject([8192, 0], mapMaxZoom));
            
        map.setMaxBounds(mapBounds);

        L.tileLayer('{z}/{x}/{y}.png', {
          minZoom: mapMinZoom, maxZoom: mapMaxZoom,
          bounds: mapBounds,
          // attribution: 'Rendered with <a href="http://www.maptiler.com/">MapTiler</a>',//
          noWrap: true          
        }).addTo(map);


        
      //add the city icons:
         var veniceIcon = L.icon({
          iconUrl: './img/City_Icons-01.svg',
          iconRetinaUrl: './img/City_Icons-01.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
         var acreIcon = L.icon({
          iconUrl: './img/City_Icons-02.svg',
          iconRetinaUrl: './img/City_Icons-02.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
         var jerusalemIcon = L.icon({
          iconUrl: './img/City_Icons-03.svg',
          iconRetinaUrl: './img/City_Icons-03.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
          var ormusIcon = L.icon({
          iconUrl: './img/City_Icons-04.svg',
          iconRetinaUrl: './img/City_Icons-04.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
          var balkhIcon = L.icon({
          iconUrl: './img/City_Icons-05.svg',
          iconRetinaUrl: './img/City_Icons-05.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
          var kashgarIcon = L.icon({
          iconUrl: './img/City_Icons-06.svg',
          iconRetinaUrl: './img/City_Icons-06.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
    
        var mogaoIcon = L.icon({
          iconUrl: './img/City_Icons-08.svg',
          iconRetinaUrl: './img/City_Icons-08.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
          var shangduIcon = L.icon({
          iconUrl: './img/City_Icons-07.svg',
          iconRetinaUrl: './img/City_Icons-07.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });

      markers.push(L.marker(venicePosition, {icon: veniceIcon}).addTo(map).bindPopup('Venice'),
        L.marker(acrePosition, {icon: acreIcon}).addTo(map).bindPopup('Arce'),
        L.marker(jerusalemPosition, {icon: jerusalemIcon}).addTo(map).bindPopup('Jerusalem'),
        L.marker(ormusPosition, {icon: ormusIcon}).addTo(map).bindPopup('Ormus'),
        L.marker(balkhPosition, {icon: balkhIcon}).addTo(map).bindPopup('Balkh'),
        L.marker(kashgarPosition, {icon: kashgarIcon}).addTo(map).bindPopup('Kashgar'),
        L.marker(mogaoPosition, {icon: mogaoIcon}).addTo(map).bindPopup('Mogao'),
        L.marker(shangduPosition, {icon: shangduIcon}).addTo(map).bindPopup('Shangdu'));


        //set the zoom control to top right corner:
        var zoomControl = L.control.zoom({
            position: 'topright',
        });
          map.addControl(zoomControl);
     
        //Correcting Icons 
        map.setZoom(3);
        setIcon_size(3);

     }
    </script>
    <style>
      html, body, #map { width: calc(100%); height:100%; margin:0; padding:0; }
    </style>
  </head>
  <body onload="init()">
  
  <!-- Off-canvas menu -->
  <a href="#welcome" class="smoothScroll" id="home"><p>HOME</p></a>
  
  <a href="#" class="off-canvas-trigger" id="js-off-canvas-trigger">INFO</a>
  
  <div class="off-canvas-content" id="js-off-canvas-content">
    <a href="#" class="off-canvas-close" id="js-off-canvas-close">Ã—</a>
    
  
    <ul class="dropdown-menu scrollable-menu" role="menu">
      <li><img src="img/City_Icons-01.svg" id="venice-navigation" alt="Venice"> <p>VENICE</p></li>
      <li><img src="img/City_Icons-02.svg" id="acre-navigation" alt="Acre"> <p>ACRE</p></li>
      <li><img src="img/City_Icons-03.svg" id="jerusalem-navigation" alt="Jerusalem"> <p>JERUSALEM</p></li>
      <li><img src="img/City_Icons-04.svg" id="ormus-navigation" alt="Ormus"> <p>ORMUS</p></li>
      <li><img src="img/City_Icons-05.svg" id="balkh-navigation" alt="Balkh"> <p>BALKH</p></li>
      <li><img src="img/City_Icons-06.svg" id="kashgar-navigation" alt="Kashgar"> <br> <p>KASHGAR</p></li>
       <li><img src="img/City_Icons-08.svg" id="mogao-navigation" alt="Mogao"> <br> <p>MOGAO CAVES</p></li>
      <li><img src="img/City_Icons-07.svg" id="shangdu-navigation" alt="Shangdu"> <p>SHANGDU</p></li>

    </ul>
  </div>
 
 <!-- first page -->
    <div class="on-top-of-menu">
      <div id="welcome">
        <h2>The adventures of Marco Polo</h2>
        <p>Animation comes here</p>
        <a href="#map" class="smoothScroll" id="explore">EXPLORE</a>
      </div>
    </div>

<!-- map -->
 
  <div id="map"> 
    
    
    </div>
  
<!-- jquery for off-canvas menu -->
  <script>
    // initialize navigation
      $(function(){
        $("#js-off-canvas-trigger, #js-off-canvas-close").on("click", function(event) {
         event.preventDefault();
         $("#js-off-canvas-content").toggleClass("is-open");
        });
        $("#kashgar-navigation").click(function() {
          map.panTo(kashgarPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#venice-navigation").click(function() {
          map.panTo(venicePosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#jerusalem-navigation").click(function() {
          map.panTo(jerusalemPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#acre-navigation").click(function() {
          map.panTo(acrePosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#ormus-navigation").click(function() {
          map.panTo(ormusPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#balkh-navigation").click(function() {
          map.panTo(balkhPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#mogao-navigation").click(function() {
          map.panTo(mogaoPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
    
    
        $("#shangdu-navigation").click(function() {
          map.panTo(shangduPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
      });
  </script>

  </body>
</html>