<!DOCTYPE html>
<html>
  <head>
    <title>The Adventures of Marco Polo</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/style.css" />

    <!--[if lte IE 8]>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" />
    <![endif]-->
    <script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    <script type="text/javascript" src="js/smoothscroll.js"></script>
        <script>
    // script for Leaflet map
      var map;
      var venicePosition = [-40, 49];
      var acrePosition = [-55, 82];
      var jerusalemPosition = [-63, 83];
      var ormusPosition = [-70, 115];
      var balkhPosition = [-51, 118];
      var kashgarPosition = [-49, 147];
      var mogaoPosition = [-41, 162];
      var shangduPosition = [-38, 194];
      var markers = [];


      function setIcon_size(zoom){
        var percentage = zoom / 5;
        
        for(i=0;i<markers.length;i++){
  
          var ico_size = markers[i].options.icon.options.iconSize_original;            
              markers[i].options.icon.options.iconSize = [ico_size[0]*percentage,ico_size[1]*percentage];
          markers[i].setIcon(markers[i].options.icon);
        }
      }
      function init() {
        var mapMinZoom = 3;
        var mapMaxZoom = 5;
        map = L.map('map', {
          maxZoom: mapMaxZoom,
          minZoom: mapMinZoom,
          zoomControl: false,
          markerZoomAnimation: false,
          crs: L.CRS.Simple
        }).setView([0, 0], mapMaxZoom);

        

        map.on('zoomend',function(event){
          var zoomlevel = map.getZoom();

          setIcon_size(zoomlevel);
          
        });
        var mapBounds = new L.LatLngBounds(
            map.unproject([0, 5792], mapMaxZoom),
            map.unproject([8192, 0], mapMaxZoom));
            
        map.setMaxBounds(mapBounds);

        L.tileLayer('{z}/{x}/{y}.png', {
          minZoom: mapMinZoom, maxZoom: mapMaxZoom,
          bounds: mapBounds,
          // attribution: 'Rendered with <a href="http://www.maptiler.com/">MapTiler</a>',//
          noWrap: true          
        }).addTo(map);


        
      //add the city icons:
         var veniceIcon = L.icon({
          iconUrl: './img/City_Icons-01.svg',
          iconRetinaUrl: './img/City_Icons-01.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
         var acreIcon = L.icon({
          iconUrl: './img/City_Icons-02.svg',
          iconRetinaUrl: './img/City_Icons-02.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
         var jerusalemIcon = L.icon({
          iconUrl: './img/City_Icons-03.svg',
          iconRetinaUrl: './img/City_Icons-03.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
          var ormusIcon = L.icon({
          iconUrl: './img/City_Icons-04.svg',
          iconRetinaUrl: './img/City_Icons-04.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
          var balkhIcon = L.icon({
          iconUrl: './img/City_Icons-05.svg',
          iconRetinaUrl: './img/City_Icons-05.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
          var kashgarIcon = L.icon({
          iconUrl: './img/City_Icons-06.svg',
          iconRetinaUrl: './img/City_Icons-06.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
    
        var mogaoIcon = L.icon({
          iconUrl: './img/City_Icons-08.svg',
          iconRetinaUrl: './img/City_Icons-08.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });
          var shangduIcon = L.icon({
          iconUrl: './img/City_Icons-07.svg',
          iconRetinaUrl: './img/City_Icons-07.svg',
          iconSize: [200, 305],
          iconSize_original : [200, 305],
          popupAnchor: [0, 0],
          shadowUrl: null,
          shadowRetinaUrl: null,
          shadowSize: [0, 0],
          shadowAnchor: [0, 0]
      });

      markers.push(L.marker(venicePosition, {icon: veniceIcon}).addTo(map).bindPopup('<p>Venice<br><br>The Republic of Venice or traditionally known as the Most Serene Republic of Venice, was a state originating from the lagoon communities in the area of Venice in Northeastern Italy.<br>In the High Middle Ages, Venice became extremely wealthy through its control of trade between Europe and the Levant, and it began to expand into the Adriatic Sea and beyond.<br>The Venetians gained extensive trading privileges in the Byzantine Empire during the 12th century, and their ships often provided the Empire with a navy. The Republic of Venice signed a trade treaty with the Mongol Empire in 1221.<br>Marco Polo was born in Venice around year 1254. At the time of his birth, his father and uncle were traveling in China. They returned to Venice in 1269 with a letter from Kublai Khan to Pope Clement IV. Two years later Polos headed back to Kublai Khan with an answer to Kublai’s letter from the new Pope Gregory X. They decided to take 17-year-old Marco with them, and thus his journey to Shangdu had begun.</p>'),
        L.marker(acrePosition, {icon: acreIcon}).addTo(map).bindPopup('<p>Acre<br><br><i>How the Two Brothers Came to the City of Acre. – Prelude, Chapter 9 [about the journey of Marco Polo’s father and uncle]<br>They departed from Layas and came to ACRE, arriving there in the month of April, in the year of Christ 1269, and then they learned that the Pope was dead. And when they found that the Pope was dead (his name was Pope Clement IV), they went to a certain wise Churchman who was Legate for the whole kingdom of Egypt, and a man of great authority, by name THEOBALD OF PIACENZA, and told him of the mission on which they were come. When the Legate heard their story, he was greatly surprised, and deemed the thing to be of great honour and advantage for the whole of Christendom. So his answer to the two Ambassador Brothers was this: &quot;Gentlemen, ye see that the Pope is dead; wherefore ye must needs have patience until a new Pope be made, and then shall ye be able to execute your charge.&quot; Seeing well enough that what the Legate said was just, they observed: &quot;But while the Pope is a-making, we may as well go to Venice and visit our households.&quot; So they departed from Acre and went to Negropont, and from Negropont they continued their voyage to Venice. On their arrival there, Messer Nicolas found that his wife was dead, and that she had left behind her a son of fifteen years of age, whose name was MARCO; and &apos;tis of him that this Book tells. The Two Brothers abode at Venice a couple of years, tarrying until a Pope should be made.</i><br>The modern city of Akko in northwestern Israel was known to medieval Europeans as Acre. The city occupies an important location, as it sits on the coast of the Mediterranean, traditionally linking the waterways and commercial activity with the Levant. Control of the city changed hands rather frequently, especially during the Crusades.</p>'),
        L.marker(jerusalemPosition, {icon: jerusalemIcon}).addTo(map).bindPopup('<p>Jerusalem<br><br>Jerusalem is located on a plateau in the Judean Mountains between the Mediterranean and the Dead Sea, and is one of the oldest cities in the world. It is considered holy to the three major Abrahamic religions — Judaism, Christianity and Islam.<br><br>Marco Polo went on to Jerusalem. He collected holy oil from the Holy Sepulcher to bring it to Kublai Khan.</p>'),
        L.marker(ormusPosition, {icon: ormusIcon}).addTo(map).bindPopup('Ormus<br><br><i>Of the Descent to the City of Ormus - Book 1, Chapter 19<br><br>When you have ridden these two days you come to the Ocean Sea, and on the shore you find a city with a harbour which is called Ormus. Merchants come thither from India, with ships loaded with spicery and precious stones, pearls, cloths of silk and gold, elephants&apos; teeth, and many other wares, which they sell to the merchants of Hormos, and which these in turn carry all over the world to dispose of again. In fact, it’s a city of immense trade. There are plenty of towns and villages under it, but it is the capital.</i><br><br>The Kingdom of Ormus was a 10th to 17th century kingdom located within the Persian Gulf and extending as far as the Strait of Ormus. The Kingdom was established by Arab princes in the 10th century who in 1262 came under the suzerainty of Persia, before becoming a client state of the Portuguese Empire. The kingdom received its name from the fortified port city which served as its capital. It was one of the most important ports in the Middle East at the time as it controlled seaway trading routes through the Persian Gulf to India and East Africa.'),
        L.marker(balkhPosition, {icon: balkhIcon}).addTo(map).bindPopup('Balkh'),
        L.marker(kashgarPosition, {icon: kashgarIcon}).addTo(map).bindPopup('Kashgar'),
        L.marker(mogaoPosition, {icon: mogaoIcon}).addTo(map).bindPopup('Mogao'),
        L.marker(shangduPosition, {icon: shangduIcon}).addTo(map).bindPopup('Shangdu'));


        //set the zoom control to top right corner:
        var zoomControl = L.control.zoom({
            position: 'topright',
        });
          map.addControl(zoomControl);
     
        //Correcting Icons 
        map.setZoom(3);
        setIcon_size(3);

     }
    </script>
    <style>
      html, body, #map { width: calc(100%); height:100%; margin:0; padding:0; }
    </style>
  </head>
  <body onload="init()">
  
  <!-- Off-canvas menu -->
  <a href="#welcome" class="smoothScroll" id="home"><p>HOME</p></a>
  
  <a href="#" class="off-canvas-trigger" id="js-off-canvas-trigger">INFO</a>
  
  <div class="off-canvas-content" id="js-off-canvas-content">
    <a href="#" class="off-canvas-close" id="js-off-canvas-close">×</a>
    
  
    <ul class="dropdown-menu scrollable-menu" role="menu">
      <li><img src="img/City_Icons-01.svg" id="venice-navigation" alt="Venice"> <p>VENICE</p></li>
      <li><img src="img/City_Icons-02.svg" id="acre-navigation" alt="Acre"> <p>ACRE</p></li>
      <li><img src="img/City_Icons-03.svg" id="jerusalem-navigation" alt="Jerusalem"> <p>JERUSALEM</p></li>
      <li><img src="img/City_Icons-04.svg" id="ormus-navigation" alt="Ormus"> <p>ORMUS</p></li>
      <li><img src="img/City_Icons-05.svg" id="balkh-navigation" alt="Balkh"> <p>BALKH</p></li>
      <li><img src="img/City_Icons-06.svg" id="kashgar-navigation" alt="Kashgar"> <br> <p>KASHGAR</p></li>
      <li><img src="img/City_Icons-08.svg" id="mogao-navigation" alt="Mogao"> <br> <p>MOGAO CAVES</p></li>
      <li><img src="img/City_Icons-07.svg" id="shangdu-navigation" alt="Shangdu"> <p>SHANGDU</p></li>

    </ul>
  </div>
 
 <!-- first page -->
    <div class="on-top-of-menu">
      <div id="welcome">
        <h2>The adventures of Marco Polo</h2>
        <p>Animation comes here</p>
        <a href="#map" class="smoothScroll" id="explore">EXPLORE</a>
      </div>
    </div>

<!-- map -->
 
  <div id="map"> 
    
    
    </div>
  
<!-- jquery for off-canvas menu -->
  <script>
    // initialize navigation
      $(function(){
        $("#js-off-canvas-trigger, #js-off-canvas-close").on("click", function(event) {
         event.preventDefault();
         $("#js-off-canvas-content").toggleClass("is-open");
        });
        $("#kashgar-navigation").click(function() {
          map.panTo(kashgarPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#venice-navigation").click(function() {
          map.panTo(venicePosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#jerusalem-navigation").click(function() {
          map.panTo(jerusalemPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#acre-navigation").click(function() {
          map.panTo(acrePosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#ormus-navigation").click(function() {
          map.panTo(ormusPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#balkh-navigation").click(function() {
          map.panTo(balkhPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
        $("#mogao-navigation").click(function() {
          map.panTo(mogaoPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
    
    
        $("#shangdu-navigation").click(function() {
          map.panTo(shangduPosition, {duration: 1});
          setTimeout("map.zoomIn(10)", 1000);
        });
      });
  </script>

  </body>
</html>